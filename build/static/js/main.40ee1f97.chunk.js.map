{"version":3,"sources":["Filter.js","PersonForm.js","PostData.js","Persons.js","App.js","index.js"],"names":["Filter","handleFilter","onChange","handleSubmit","handleInput","handleNumber","onSubmit","type","baseUrl","newObject","axios","post","get","id","console","log","delete","then","response","data","put","Persons","props","shownPersons","map","person","name","number","onClick","window","confirm","PostData","setShownPersons","catch","error","setSuccess","checkDelete","App","useState","persons","setPersons","success","useEffect","newName","setNewName","newNumber","setNewNumber","event","filterString","target","value","temp","filter","toLowerCase","includes","PersonForm","preventDefault","length","response1","setTimeout","response2","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.40ee1f97.chunk.js","sourcesContent":["import React from 'react'\r\n\r\n\r\nconst Filter = ({handleFilter}) => {\r\n\r\n    return (\r\n        <div>\r\n        filter shown with: <input onChange = {handleFilter} />\r\n      </div>\r\n    )\r\n\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\n\r\nconst Filter = ({handleSubmit, handleInput, handleNumber}) => {\r\n\r\n    return (\r\n        <form onSubmit = {handleSubmit} >\r\n        <div>\r\n          name: <input onChange = {handleInput} />\r\n        </div>\r\n        <div>\r\n          number: <input onChange = {handleNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n\r\n}\r\n\r\nexport default Filter","import axios from 'axios';\r\n\r\nconst baseUrl = 'http://localhost:3001/api'\r\n\r\nconst addNumber = (newObject)  => {\r\n    return axios.post(`${baseUrl}/new`, newObject)\r\n\r\n};\r\n\r\nconst getAll = () => {\r\n    return axios.get(`${baseUrl}/persons`)\r\n  };\r\n\r\n\r\n\r\nconst deleteUser = (id) => {\r\n    console.log(`${baseUrl}/delete/${id}`)\r\n    const temp = axios.delete(`${baseUrl}/delete/${id}`)\r\n    return temp.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    return axios.put(`${baseUrl}/${id}`, newObject)\r\n  }\r\n\r\n\r\n\r\n  export default {\r\n      addNumber,\r\n      getAll,\r\n      deleteUser,\r\n      update\r\n  }\r\n","import React from 'react';\r\nimport PostData from './PostData';\r\n\r\n\r\n\r\n\r\nconst Persons = (props) => {\r\n\r\n    const checkDelete = (person) => {\r\n\r\n        if(window.confirm(`Are you sure you want to delete ${person.name}`)){\r\n            PostData.deleteUser(person.id)\r\n            .then(() => PostData.getAll().then(response => props.setShownPersons(response.data)))\r\n            .catch(error => {\r\n                props.setSuccess(\"Something went wrong\")\r\n                console.log(error)\r\n              })\r\n            \r\n            \r\n            \r\n        }\r\n    \r\n    }\r\n\r\n    \r\n    return ( props.shownPersons.map(person => <p key = {person.name}>{person.name } {person.number}  <button onClick={() => checkDelete(person)} >Delete</button> </p>) )\r\n\r\n}\r\n\r\nexport default Persons","import React, { useState, useEffect } from 'react';\nimport Filter from './Filter';\nimport PersonForm from './PersonForm';\nimport Persons from './Persons';\nimport axios from 'axios'\nimport PostData from './PostData';\n\nconst App = () => {\n  const [ persons, setPersons ] = useState(PostData.getAll().response) \n  const [success, setSuccess ] = useState(null)\n\n\n  useEffect(() => {    \n    console.log('effect')  \n    PostData.getAll().then(response => {        \n      console.log('promise fulfilled')        \n      setPersons(response.data)\n      setShownPersons(response.data)\n    \n    })  }, [])\n  \n\n  const [ shownPersons, setShownPersons ] = useState([\n    { name: 'Arto Hellas',\n      number: 123456789 }\n  ]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState(0)\n\n\n  const handleFilter = (event) => { \n    let filterString = event.target.value\n    let temp = persons.filter(person => person.name.toLowerCase().includes(filterString.toLowerCase()));\n    setShownPersons(temp);\n\n\n    console.log(event.target.value)    \n    setNewName(event.target.value)}\n  \n  \n  const handleInput = (event) => { \n       console.log(event.target.value)    \n       setNewName(event.target.value)}\n\n       const handleNumber = (event) => { \n        console.log(event.target.value)    \n        setNewNumber(event.target.value)}\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n\n\n\n    let temp = persons.filter(person => person.name === newName);\n    if(temp.length === 0){\n      const newArray = persons.map(person => ({...person}))\n      let person = {name: newName, number: newNumber}\n      PostData.addNumber(person).then(response1 => {\n        PostData.getAll().then(response => {\n          console.log(\"Response data is\", response.data)\n          setSuccess(`It worked, ${person.name} has been added`)\n          setTimeout(() => { setSuccess(null)}, 5000)\n          setShownPersons(response.data);\n          setPersons(response.data)\n\n      }).catch(error => {\n        setSuccess(\"Something went wrong\")\n        console.log(error)\n      })\n\n      })\n    } else{\n      if(window.confirm(newName + \"is already added to the phone book.  Replace old number with new number?\")){\n        let person = {name: newName, number: newNumber}\n\n        PostData.update(temp[0].id, person).then(response2 => {\n          PostData.getAll().then(response =>{\n            setSuccess(`It worked, ${person.name} has been added with a new number`)\n            setTimeout(() => { setSuccess(null)}, 5000)\n            setShownPersons(response.data)\n            setPersons(response.data)\n\n          }).catch(error => {\n            setSuccess(\"Something went wrong\")\n            console.log(error)\n          })\n        })\n\n      }\n\n    }\n\n       }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter handleFilter = {handleFilter}/>\n      <p>{success}</p>\n      <h3>Add a new</h3>\n      <PersonForm handleInput = {handleInput} handleNumber = {handleNumber} handleSubmit = {handleSubmit} />\n      <h2>Numbers</h2>\n      <Persons shownPersons = {shownPersons} setShownPersons = {setShownPersons} setSuccess = {setSuccess}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}